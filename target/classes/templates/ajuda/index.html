<!DOCTYPE html>
<html lang="pt-BR" th:replace="~{layout/base :: layout(
    pageTitle='Ajuda e Suporte (Manual do Usuário)',
    activePage='ajuda',
    content=~{::main},
    extraHead=~{},
    extraScript=~{}
)}">
<main>
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/dashboard">Dashboard</a></li>
            <li class="breadcrumb-item active">Ajuda</li>
        </ol>
    </nav>

    <div class="row mb-4">
        <div class="col-12">
            <div class="card bg-primary text-white"
                style="background: linear-gradient(135deg, #1e3a8a, #3b82f6) !important;">
                <div class="card-body py-4">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-book-open fs-1 me-4 opacity-75"></i>
                        <div>
                            <h4 class="mb-1" style="font-weight: 700;">Como usar o ERP?</h4>
                            <p class="mb-0 opacity-75">Aqui você encontra o guia completo com todas as funções, regras e
                                fluxos do sistema para facilitar o dia a dia da indústria.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Accordion de Documentação -->
    <div class="accordion" id="accordionAjuda">

        <!-- PRODUCAO E QUALIDADE -->
        <div class="accordion-item mb-3 border rounded shadow-sm">
            <h2 class="accordion-header" id="headingProducao">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseProducao" aria-expanded="false" aria-controls="collapseProducao"
                    style="font-weight: 600; font-size: 1rem;">
                    <i class="fas fa-industry me-2 text-primary"></i> 1. Produção e Qualidade
                </button>
            </h2>
            <div id="collapseProducao" class="accordion-collapse collapse" aria-labelledby="headingProducao"
                data-bs-parent="#accordionAjuda">
                <div class="accordion-body" style="font-size: 0.9rem; line-height: 1.6; color: #475569;">
                    <h5 style="color: #1e293b; font-weight: 600;">Fluxo de Produção</h5>
                    <p>O ERP foi desenhado para calcular o <strong>Custo Unitário Real</strong> da mercadoria. O fluxo
                        de produção acontece em 3 etapas:</p>
                    <ol>
                        <li><strong>Criação da OP (Ordem de Produção):</strong> Escolha os insumos que serão consumidos
                            da fábrica para criar o produto. A OP nasce com o status <span
                                class="badge bg-secondary">Planejada</span>.</li>
                        <li><strong>Iniciar Produção:</strong> Ao clicar em Iniciar, o status muda para <span
                                class="badge bg-primary">Em Produção</span> e o sistema realiza a baixa automática de
                            todos os insumos selecionados do seu estoque.</li>
                        <li><strong>Finalização da OP:</strong> Após a produção acabar, informe quanto rendeu (Qtd.
                            Produzida), se houve <b>Refugo</b> (desperdício) e gastos extras como Mão de Obra e Energia.
                            O status muda para <span class="badge bg-success">Finalizada</span> e o sistema calcula
                            automaticamente o custo final do produto.</li>
                        <li><strong>Quarentena (Lote):</strong> O estoque final NÃO fica disponível para venda ainda. O
                            Lote gerado é enviado para a Quarentena.</li>
                    </ol>
                    <p><em>Nota: Uma OP pode ser <span class="badge bg-danger">Cancelada</span> a qualquer momento antes
                            da sua finalização, revertendo as movimentações pendentes. Para criar os produtos que
                            aparecerão na OP, acesse o menu <strong>Estoque -> Produtos Acabados</strong>.</em></p>

                    <hr>

                    <h5 style="color: #1e293b; font-weight: 600;">Controle de Qualidade (Aprovação de Lote)</h5>
                    <p>Para manter as regras sanitárias, todo produto de uma OP aguarda no painel de
                        <strong>Quarentena</strong>. Um analista deve realizar os testes fisíco-químicos e decidir:
                    </p>
                    <ul>
                        <li><span class="badge bg-success">Aprovar</span> - A mercadoria entra imediatamente no estoque
                            disponível do ERP e já pode ser faturada.</li>
                        <li><span class="badge bg-danger">Reprovar</span> - A mercadoria é travada e <b>não vira
                                estoque</b>, gerando um prejuízo calculado contabilmente.</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- ESTOQUE -->
        <div class="accordion-item mb-3 border rounded shadow-sm">
            <h2 class="accordion-header" id="headingEstoque">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseEstoque" aria-expanded="false" aria-controls="collapseEstoque"
                    style="font-weight: 600; font-size: 1rem;">
                    <i class="fas fa-boxes-stacked me-2 text-warning"></i> 2. Gestão de Estoque
                </button>
            </h2>
            <div id="collapseEstoque" class="accordion-collapse collapse" aria-labelledby="headingEstoque"
                data-bs-parent="#accordionAjuda">
                <div class="accordion-body" style="font-size: 0.9rem; line-height: 1.6; color: #475569;">
                    <h5 style="color: #1e293b; font-weight: 600;">Insumos e Produtos Acabados</h5>
                    <p>O sistema divide o inventário entre <strong>Insumos</strong> (matéria prima e embalagens usadas
                        nas Ordens de Produção) e <strong>Produtos Acabados</strong> (itens liberados para a venda).</p>
                    <ul>
                        <li><strong>Aba Insumos:</strong> Ao cadastrar um insumo, defina a <i>Quantidade Mínima
                                Múltipla</i> (Estoque de Segurança). Quando o insumo baixar além do mínimo aceitável, o
                            sino no topo superior piscará em vermelho pedindo reposição.</li>
                        <li><strong>Movimentações:</strong> Tudo tem rastreio. Qualquer alteração de estoque devido a
                            uma OP ou Pedido de Venda gera um registro imutável em <b>Estoque > Movimentações</b>. O ERP
                            <b>não permite</b> excluir ou alterar movimentações geradas por fluxos automáticos para
                            evitar fraudes.
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- VENDAS E LOGÍSTICA -->
        <div class="accordion-item mb-3 border rounded shadow-sm">
            <h2 class="accordion-header" id="headingVendas">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseVendas" aria-expanded="false" aria-controls="collapseVendas"
                    style="font-weight: 600; font-size: 1rem;">
                    <i class="fas fa-truck-fast me-2 text-success"></i> 3. Vendas B2B e Logística
                </button>
            </h2>
            <div id="collapseVendas" class="accordion-collapse collapse" aria-labelledby="headingVendas"
                data-bs-parent="#accordionAjuda">
                <div class="accordion-body" style="font-size: 0.9rem; line-height: 1.6; color: #475569;">
                    <h5 style="color: #1e293b; font-weight: 600;">Pedidos de Venda</h5>
                    <p>Clientes diferem por Perfil de Preço: <b>Varejo, Atacado e Distribuidor</b>. O pedido sempre
                        carregará o valor cadastrado para aquele perfil correspondente na tela do Produto.</p>
                    <p>Os estados de um pedido são:</p>
                    <ul>
                        <li><strong>Rascunho:</strong> Sem impacto. Pode ser alterado.</li>
                        <li><strong>Confirmado:</strong> Bloqueia o fechamento e garante o compromisso comercial.</li>
                        <li><strong>Faturado:</strong> Ao faturar, o ERP <b>abate automaticamente os produtos do
                                Estoque</b>. Insira o código de Rastreio neste momento.</li>
                        <li><strong>Entregue:</strong> Avalia a SLA Logística.</li>
                    </ul>

                    <hr>

                    <h5 style="color: #1e293b; font-weight: 600;">Módulo de Transportadoras e OTIF</h5>
                    <p>Para que o botão visual de Rastreio funcione nos detalhes do pedido, cadastre a transportadora
                        informando a rotina de <b>API de Integração</b> (ex: Loggi, Correios). Insira URLs
                        personalizados com <code>{codigo}</code> se for de terceiros. </p>
                    <p>No <strong>Painel do Centro de Distribuição</strong>, preste atenção à Métrica <b>OTIF</b> (On
                        Time In Full). Quando o botão de "Entregue" for clicado num pedido, o sistema julgará o OTIF
                        como <i>Atrasado</i> ou <i>No Prazo</i> baseando-se na Data Prevista definida pelo comercial.
                    </p>

                    <hr>

                    <h5 style="color: #1e293b; font-weight: 600;">WMS Avançado e Expedição do CD</h5>
                    <p>O ERP possui um sistema nativo de gestão de armazém (WMS) para maximizar a assertividade do setor
                        de expedição:</p>
                    <ul>
                        <li><strong>Endereçamento Mapeado:</strong> Quando a Qualidade aprova um novo Lote, o sistema
                            exige que seja especificada a localização física (ex: Prateleira B2). O estoque fica 100%
                            mapeado na tela do ERP.</li>
                        <li><strong>Romaneio de Separação (Picking list):</strong> Na tela do Pedido em estado
                            <i>Confirmado</i>, o CD deve gerar e imprimir o Romaneio. O documento irá ordenar os
                            produtos fisicamente para o estoquista andar menos, sugerindo sempre a coleta do
                            <strong>Lote mais antigo</strong> para respeitar a regra FEFO (First-Expire, First-Out).
                        </li>
                        <li><strong>Painel de Conferência (Packing e Bipagem):</strong> Após separar no carrinho, o
                            estoquista abre a tela de conferência do pedido. Ele precisará **bipar (ler o código de
                            barras)** de cada unidade antes de selar a caixa de papelão. O sistema acusará erro e ficará
                            com a tela vermelha caso a pessoa bipe um produto que o cliente não comprou.</li>
                        <li><strong>Rastreabilidade Fina de Lote:</strong> O faturamento só é concluído quando o
                            estoquista seleciona no sistema de qual Lote exato aquele pote foi tirado. Isso garante que
                            a empresa saiba historicamente qual cliente recebeu qual lote, cumprindo as normativas
                            sanitárias.</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- ADMINISTRAÇÃO -->
        <div class="accordion-item border rounded shadow-sm mb-5">
            <h2 class="accordion-header" id="headingAdmin">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseAdmin" aria-expanded="false" aria-controls="collapseAdmin"
                    style="font-weight: 600; font-size: 1rem;">
                    <i class="fas fa-building-shield me-2 text-danger"></i> 4. Área Administrativa (White-Label)
                </button>
            </h2>
            <div id="collapseAdmin" class="accordion-collapse collapse" aria-labelledby="headingAdmin"
                data-bs-parent="#accordionAjuda">
                <div class="accordion-body" style="font-size: 0.9rem; line-height: 1.6; color: #475569;">
                    <p>Usuários com o perfil <b>ADMINISTRADOR</b> ou <b>GERENTE</b> têm acesso extra ao painel de
                        configurações.</p>
                    <ul>
                        <li><strong>Troca de Logo:</strong> No atalho da engrenagem superior, você consegue fazer o
                            Upload da foto da sua empresa e alterar o Nome Fantasia / CNPJ. O ERP se adaptará
                            instantaneamente trocando a cara em menus, notas e guias.</li>
                        <li><strong>Gestão de Usuários:</strong> É possível criar novos colaboradores informando seus
                            e-mails operacionais e senhas de acesso, mas respeitando uma hierarquia dura (Financeiro e
                            Almoxarifado não podem ver os custos do Administrador). O status ATIVO/INATIVO é a forma
                            segura de revogar acesso de ex-funcionários sem apagar históricos do banco de dados.</li>
                    </ul>
                </div>
            </div>
            <!-- SENSORES IOT -->
            <div class="accordion-item border rounded shadow-sm mb-3">
                <h2 class="accordion-header" id="headingIot">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseIot" aria-expanded="false" aria-controls="collapseIot"
                        style="font-weight: 600; font-size: 1rem;">
                        <i class="fas fa-satellite-dish me-2 text-info"></i> 5. Integração IoT e Indústria 4.0
                    </button>
                </h2>
                <div id="collapseIot" class="accordion-collapse collapse" aria-labelledby="headingIot"
                    data-bs-parent="#accordionAjuda">
                    <div class="accordion-body" style="font-size: 0.9rem; line-height: 1.6; color: #475569;">
                        <h5 style="color: #1e293b; font-weight: 600;">Automação do Chão de Fábrica</h5>
                        <p>O FabricHair ERP possui comunicação direta via rede com o maquinário físico através de
                            webhooks, garantindo controle em tempo real e fim dos erros por digitação manual.</p>
                        <ul>
                            <li><strong>Monitoramento Térmico:</strong> Acesse o dashboard em <b>Qualidade &gt;
                                    Termômetros IoT</b> para acompanhar sensores de temperatura e umidade da área de
                                Quarentena. Se o ambiente aquecer demais, você saberá em tempo real.</li>
                            <li><strong>Monitoramento de Esteiras (OEE):</strong> Acesse <b>Produção &gt; Monitor de
                                    Esteiras</b> para acompanhar a contagem de unidades envasadas por minuto na linha de
                                produção (via Pulsos PLC diretamente do painel da máquina).</li>
                            <li><strong>Balanças Autônomas:</strong> A tela de "Finalizar Produção e Gerar Lote" possui
                                integração direta. Basta colocar o tanque na balança, clicar em <i>"Ler Peso da Balança
                                    IoT"</i> que o sistema injeta os Kilos (Kg) exatos na Ordem de Produção.</li>
                            <li><strong>Integração RFID:</strong> O sistema possui endpoints receptivos
                                (`/api/iot/push`) que gravam as aproximações das empilhadeiras ao cruzar o Portal WMS do
                                Centro de Distribuição, engatilhando a baixa de estoque e o Faturamento Múltiplo do
                                Romaneio sem precisar usar o mouse.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- FAQ / PERGUNTAS FREQUENTES -->
            <div class="accordion-item border rounded shadow-sm mb-5">
                <h2 class="accordion-header" id="headingFaq">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseFaq" aria-expanded="false" aria-controls="collapseFaq"
                        style="font-weight: 600; font-size: 1rem;">
                        <i class="fas fa-question-circle me-2 text-secondary"></i> 6. Perguntas Frequentes (FAQ)
                    </button>
                </h2>
                <div id="collapseFaq" class="accordion-collapse collapse" aria-labelledby="headingFaq"
                    data-bs-parent="#accordionAjuda">
                    <div class="accordion-body" style="font-size: 0.9rem; line-height: 1.6; color: #475569;">
                        <div class="mb-4">
                            <h5 style="color: #1e293b; font-weight: 600;">O ERP gera Códigos de Barras (EAN-13)
                                automaticamente?</h5>
                            <p><strong>Não. E isso é para sua segurança legal e comercial.</strong> O Brasil segue o
                                padrão global de varejo ditado pela <em>GS1 Brasil</em>. Se o sistema gerasse números
                                aleatórios de 13 dígitos da nossa cabeça, seu produto apitaria em todos os caixas de
                                supermercado ou farmácia do país como se fosse uma "Coca-Cola" ou daria conflito de
                                cadastro nos grandes varejistas.</p>
                            <p><strong>A regra legal é:</strong> A sua indústria precisa se afiliar à GS1 Brasil para
                                comprar o "Prefixo de Empresa", e você mesmo gera os últimos dígitos oficiais para os
                                seus novos produtos no painel deles. Tendo o número oficial em mãos, você digita ele no
                                campo <strong>EAN (Código de Barras)</strong> lá na tela de Cadastrar Produto do ERP. O
                                nosso sistema já está configurado e travado para receber apenas os 13 dígitos originais.
                            </p>
                        </div>

                        <div class="mb-4">
                            <h5 style="color: #1e293b; font-weight: 600;">Qual é a diferença pro código SKU?</h5>
                            <p>O <strong>SKU - Stock-Keeping Unit</strong> (Unidade de Manutenção de Estoque) é 100%
                                interno. Não existe Lei
                                ou padrão governamental para ele. Você é livre para criar a nomenclatura que a sua
                                equipe achar mais fácil de ler no almoxarifado.</p>
                            <p><em>Exemplo:</em> Para um "Shampoo Anticaspa 300ml", você pode padronizar verbalmente que
                                o SKU na sua fábrica vai ser <code>SHA-ACA-300</code>. O ERP tem o campo SKU livre para
                                digitação, garantindo apenas que você não cadastre o mesmo código duas vezes para não
                                misturar os estoques.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</main>

</html>